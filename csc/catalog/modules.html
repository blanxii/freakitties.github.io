<!--
    Copyright 2019 freakitties@gmail.com
    You can copy and use this code if you agree to pay $1 per page load.
-->
<html>
    <head>
        <title>CSC Modules Catalog</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116189657-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-116189657-1');
        </script>
        <script src="../../axie/js/utils.js"></script>
        <script src="../js/mods.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" integrity="sha384-1UXhfqyOyO+W+XsGhiIFwwD3hsaHRz2XDGMle3b8bXPH5+cMsXVShDoHA3AH/y/p" crossorigin="anonymous">
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js" integrity="sha384-Z9D45cp3elqajO+xEyjRTIK1Gr3eYsXiyCPIKNog1sIQzpo2fqFDqFdADGiJjzOv" crossorigin="anonymous"></script>
        <style>
            .dropdown-menu>li>a, .dropdown-menu {
                color: white;
                background-color: #6c757d;
            }
        </style>
    </head>

<script>

    function init() {
        $.ajax({
            url: "../../header.html",
            cache: false,
            dataType: "html",
            success: function(data) {
                $("#headerDiv").html(data);
            }
        });
    }

    function renderStatus(data, type, row, meta) {
        if (type == "display") {
            return data;
        }
        return data;
    }

    function renderID(data, type, full) {
        if(type === 'display'){
            let id = parseInt (data);
            return '<a target="_blank" href="https://csc-game.com/asset/' + id + '"><img height="50" src="' + weakEscape(full.iconURL) + '"><br>' + id + "</a>";
        }
        return data;
    }

    function renderSize(data, type, full) {
        return data.replace(",", "x");
    }

    function renderDefault(data, type, full) {
        if (data == null) return "-";
        if (typeof(data) == "string") {
            return weakEscape(data);
        } else {
            return data;
        }
    }

    var modTable;
    $(document).ready(function(){
        init();
        modTable = $('#modTable').DataTable({
            data: modules,
            columns: [
                {title: "ID", data: "itemID", render: renderID},
                {title: "Name", data: "name", render: renderDefault},
                {title: "Class", data: "classType", render: renderDefault},
                {title: "Size", data: "size", render: renderSize},
                {title: "Tech Level", data: "techLevel", render: renderDefault},
                {title: "unitWeight", data: "unitWeight", render: renderDefault},
                {title: "category", data: "gameData.category", render: renderDefault},
                {title: "craftingTime", data: "gameData.craftingTime", render: renderDefault},
                {title: "durability", data: "gameData.durability", render: renderDefault},
                {title: "hull", data: "gameData.hull", render: renderDefault},
                {title: "isActive", data: "gameData.isActive", render: renderDefault},
                {title: "manufacturer", data: "gameData.manufacturer", render: renderDefault},
                {title: "powerBase", data: "gameData.powerBase", render: renderDefault},
                {title: "powerDraw", data: "gameData.powerDraw", render: renderDefault},
                {title: "prefab", data: "gameData.prefab", render: renderDefault},
                {title: "shieldPowerBase", data: "gameData.shieldPowerBase", render: renderDefault},
                {title: "shieldRechargeInc", data: "gameData.shieldRechargeInc", render: renderDefault},
                {title: "shieldRechargeRate", data: "gameData.shieldRechargeRate", render: renderDefault},
                {title: "shields", data: "gameData.shields", render: renderDefault},
                {title: "subType", data: "gameData.subType", render: renderDefault},
                {title: "toggleable", data: "gameData.toggleable", render: renderDefault},
                {title: "type", data: "gameData.type", render: renderDefault},
                //{title: "description", data: "gameData.description", render: renderDefault, searchable: false}
            ],
            pageLength: 50,
            columnDefs: [
                { className: "text-center", "targets": [0] }
            ]
        });
        shipTable.draw();
    });
</script>
    <!-- header -->
    <div id="headerDiv"></div><br/>
    <div class="container ml-5">
      <table class="table table-striped" id="modTable">
      </table>
  </div>

<br/>
</html>